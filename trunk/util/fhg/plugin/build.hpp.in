#ifndef FHG_PLUGIN_BUILD_HPP
#define FHG_PLUGIN_BUILD_HPP 1

struct fhg_plugin_desc_t
{
  const char * name;
  const char * type;
  void * (*create)(void);
  void (*destroy)(void*);
};

#define FHG_PLUGIN_BUILD_INFO_STRING "/release=@PROJECT_REVISION@"
#define TOSTR_(x) #x
#define TOSTR(x) TOSTR_(x)
#define FHG_PLUGIN_DESCRIPTOR(name, type, create, destroy)              \
  static const char *build_info_##name = FHG_PLUGIN_BUILD_INFO_STRING;  \
  extern "C"                                                            \
  {                                                                     \
    const char *fhg_plugin_build_info() { return build_info_ ## name; } \
                                                                        \
    const fhg_plugin_desc_t *fhg_plugin_descriptor()                    \
    {                                                                   \
      static fhg_plugin_desc_t desc = {#name ,type,create,destroy };    \
      return &desc;                                                     \
    }                                                                   \
  }                                                                     \

#undef TOSTR_
#undef TOSTR

#endif
