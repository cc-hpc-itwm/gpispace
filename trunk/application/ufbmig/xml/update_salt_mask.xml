<defun name="update_salt_mask">

  <include-structs href="types.xml"/>

  <in name="file_with_config" type="string" place="file_with_config"/>
  <in name="file_with_mask" type="string" place="file_with_mask"/>
  <out name="done" type="control" place="finalized"/>

  <net>
    <place name="file_with_config" type="string"/>
    <place name="file_with_mask" type="string"/>
    <place name="finalized" type="control"/>
    <place name="config" type="config"/>

    <transition name="one" inline="true">
      <include-function href="update_salt_mask_one.xml"/>
      <connect-in port="file_with_config" place="file_with_config"/>
      <connect-in port="file_with_mask" place="file_with_mask"/>
      <connect-out port="config" place="config"/>
    </transition>

    <transition name="two" inline="true">
      <include-function href="update_salt_mask_two.xml"/>
      <connect-in port="config" place="config"/>
      <connect-out port="done" place="finalized"/>
    </transition>
  </net>
</defun>
