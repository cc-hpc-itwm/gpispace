<defun>

  <in name="config" type="diff_config" place="config"/>
  <out name="slot" type="long" place="slot"/>

  <net>

    <place name="config" type="diff_config"/>
    <place name="slot" type="long"/>

    <transition name="extractN">
      <defun>
        <in name="config" type="diff_config"/>
        <out name="N" type="long"/>
        <expression>
          ${N} := ${config.num.slot};
        </expression>
      </defun>
      <connect-in port="config" place="config"/>
      <connect-out port="N" place="N"/>
    </transition>

    <place name="N" type="long"/>

    <transition name="generate" inline="true">
      <include-function href="sequence.xml"/>
      <connect-in port="amount" place="N"/>
      <connect-out port="out" place="slot"/>
    </transition>
  </net>
</defun>
