<defun name="put_get">
  <struct name="point">
    <field name="x" type="double"/>
    <field name="y" type="double"/>
  </struct>
  <struct name="line">
    <field name="start" type="point"/>
    <field name="end" type="point"/>
  </struct>

  <in name="a" type="line" place="a"/>
  <out name="b" type="line" place="b"/>
  <out name="c" type="line" place="c"/>

  <net>
    <place name="a" type="line">
      <token>
        <field name="start">
          <field name="x"><value>1.0 / sqrt(3)</value></field>
          <field name="y"><value>2.0 / sqrt(3)</value></field>
        </field>
        <field name="end">
          <field name="x"><value>3.0 / sqrt(3)</value></field>
          <field name="y"><value>4.0 / sqrt(3)</value></field>
        </field>
      </token>
    </place>

    <place name="stretch" type="double">
      <token><value>sqrt(3)</value></token>
    </place>

    <place name="b" type="line"/>
    <place name="c" type="line"/>

    <transition name="run">
      <defun>
        <in name="a" type="line"/>
        <in name="stretch" type="double"/>
        <out name="b" type="line"/>
        <out name="c" type="line"/>

        <module name="put_get" function="run"/>
      </defun>

      <connect-in port="a" place="a"/>
      <connect-in port="stretch" place="stretch"/>
      <connect-out port="b" place="b"/>
      <connect-out port="c" place="c"/>
    </transition>
  </net>
</defun>
