<defun>

  <in name="N" type="long" place="N"/>
  <in name="trigger" type="control" place="trigger"/>
  <out name="done" type="control" place="done"/>
  <tunnel name="store_volume" type="store_volume" place="store_volume"/>

  <net>

    <place name="N" type="long"/>
    <place name="trigger" type="control"/>
    <place name="done" type="control"/>
    <place name="store_volume" type="store_volume" virtual="true"/>

    <include-template href="eatN.xml"/>
    <specialize name="eat_store_volume" use="eatN">
      <type-map replace="T" with="store_volume"/>
    </specialize>

    <transition name="eat">
      <use name="eat_store_volume"/>
      <place-map virtual="what" real="store_volume"/>
      <connect-in port="N" place="N"/>
      <connect-in port="trigger" place="trigger"/>
      <connect-out port="done" place="done"/>
    </transition>

  </net>
</defun>
